<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>View Recipe</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <%- include('partials/header') %>

  <div class="container">
    <h1><%= recipe.name %></h1>

    <p><strong>Cuisine:</strong> <%= recipe.cuisine %></p>
    <p><strong>Meal Type:</strong> <%= recipe.mealType %></p>
    <p><strong>Difficulty:</strong> <%= recipe.difficulty %></p>
    <p><strong>Preparation Time:</strong> <%= recipe.prepTime %> minutes</p>

    <h3>Ingredients</h3>
    <% if (!recipe.ingredients || recipe.ingredients.length === 0) { %>
      <p>No ingredients listed.</p>
    <% } else { %>
      <ul>
        <% recipe.ingredients.forEach(ingredient => {
             const matched = ingredients.find(i =>
               i._id?.toString() === ingredient.id?.toString()
             );
        %>
          <li>
            <%= ingredient.quantity %> 
            <%= ingredient.unit %> 
            - <%= matched ? matched.name : 'Unknown Ingredient' %>
          </li>
        <% }) %>
      </ul>
    <% } %>

    <h3>Instructions</h3>
    <p><%= recipe.instructions %></p>

    <h3>Nutrition Info</h3>
    <ul>
      <li>Calories: <%= recipe.nutrition?.calories %> kcal</li>
      <li>Fat: <%= recipe.nutrition?.fat %> g</li>
      <li>Carbs: <%= recipe.nutrition?.carbs %> g</li>
      <li>Protein: <%= recipe.nutrition?.protein %> g</li>
    </ul>

    <div class="actions">
      <a href="/recipes" class="btn">Back to Recipes</a>
    </div>
  </div>

  <%- include('partials/footer') %>
</body>
</html>
